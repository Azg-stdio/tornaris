<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#1a0a2e" />
  <title>Tornaris</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body data-time="day">

  <!-- Sky background (fixed, z-index 0) -->
  <div class="sky-layer" aria-hidden="true">
    <div class="sky-sun"></div>
    <div class="sky-moon"></div>
    <div class="sky-stars">
      <span></span><span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span><span></span>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: SETUP
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="screen-setup" class="screen active">
    <div class="screen-inner">
      <header class="setup-header">
        <h1 class="logo">âš”ï¸ Tornaris</h1>
        <p class="logo-sub">CompaÃ±ero de Partida</p>
      </header>

      <!-- Options toggles -->
      <div class="card options-card">
        <h2 class="card-title">Opciones</h2>
        <label class="toggle-row">
          <span class="toggle-label">ğŸ‰ Monstruos Digitales</span>
          <input type="checkbox" id="opt-monsters" role="switch" />
          <span class="toggle-track"><span class="toggle-thumb"></span></span>
        </label>
        <label class="toggle-row">
          <span class="toggle-label">ğŸŒŸ Eventos Digitales</span>
          <input type="checkbox" id="opt-events" role="switch" />
          <span class="toggle-track"><span class="toggle-thumb"></span></span>
        </label>
        <label class="toggle-row">
          <span class="toggle-label">ğŸ“Š Tracking Completo</span>
          <input type="checkbox" id="opt-tracking" role="switch" />
          <span class="toggle-track"><span class="toggle-thumb"></span></span>
        </label>
      </div>

      <!-- Players -->
      <div class="card players-card">
        <h2 class="card-title">Jugadores</h2>
        <div id="player-slots"></div>
        <button id="btn-add-player" class="btn btn-secondary btn-sm">+ Agregar Jugador</button>
      </div>

      <button id="btn-start" class="btn btn-primary btn-lg" disabled>Comenzar Partida</button>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: GAME
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="screen-game" class="screen">
    <div class="screen-inner">
      <!-- Header -->
      <header class="game-header">
        <div id="game-day-label" class="day-label"></div>
        <button id="btn-advance" class="btn btn-primary btn-sm">Avanzar â–¶</button>
      </header>

      <!-- Event card -->
      <div id="event-section" class="card event-card" style="display:none">
        <div class="event-badge" id="event-badge">DÃA</div>
        <div class="event-name" id="event-name"></div>
        <div class="event-effect" id="event-effect"></div>
      </div>

      <!-- Monster section -->
      <div id="monster-section" class="card monster-card" style="display:none">
        <div class="monster-inner">
          <img id="monster-img" src="" alt="" class="monster-image" />
          <div class="monster-info">
            <div class="monster-name" id="monster-name"></div>
            <span id="monster-tier-badge" class="tier-badge"></span>
            <div class="monster-stat"><span class="stat-label">â¤ï¸ Vida</span> <span id="monster-hp"></span></div>
            <div class="monster-stat"><span class="stat-label">âœ¨ Habilidad</span> <span id="monster-ability"></span></div>
            <div class="monster-stat"><span class="stat-label">ğŸ† Recompensa</span> <span id="monster-reward"></span></div>
            <div class="monster-stat"><span class="stat-label">ğŸ’€ Penitencia</span> <span id="monster-penalty"></span></div>
          </div>
        </div>
        <button id="btn-defeat-monster" class="btn btn-accent btn-sm" style="margin-top:0.5rem">âœ… Monstruo Derrotado</button>
      </div>

      <!-- Players horizontal scroll -->
      <div id="players-scroll" class="players-scroll"></div>
    </div>

    <!-- Floating duel button -->
    <button id="btn-duel-float" class="fab" title="Duelo">âš”ï¸</button>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: DUEL
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="screen-duel" class="screen">
    <div class="screen-inner">
      <header class="duel-header">
        <button id="btn-duel-back" class="btn btn-ghost btn-sm">â† Volver</button>
        <h2>Duelo</h2>
      </header>

      <!-- Player selectors -->
      <div class="duel-selectors">
        <select id="duel-select-1" class="duel-select"></select>
        <span class="vs-badge">VS</span>
        <select id="duel-select-2" class="duel-select"></select>
      </div>

      <!-- Fighter panels -->
      <div class="duel-fighters">
        <div class="fighter-panel" id="fighter-1">
          <div class="fighter-name" id="fighter-1-name">Jugador 1</div>
          <div class="fighter-char" id="fighter-1-char"></div>
          <div class="score-box">
            <button class="score-btn score-dec" data-fighter="1" aria-label="Restar">âˆ’</button>
            <div class="score-display" id="score-1" contenteditable="true" inputmode="numeric">0</div>
            <button class="score-btn score-inc" data-fighter="1" aria-label="Sumar">+</button>
          </div>
        </div>

        <div class="fighter-panel" id="fighter-2">
          <div class="fighter-name" id="fighter-2-name">Jugador 2</div>
          <div class="fighter-char" id="fighter-2-char"></div>
          <div class="score-box">
            <button class="score-btn score-dec" data-fighter="2" aria-label="Restar">âˆ’</button>
            <div class="score-display" id="score-2" contenteditable="true" inputmode="numeric">0</div>
            <button class="score-btn score-inc" data-fighter="2" aria-label="Sumar">+</button>
          </div>
        </div>
      </div>

      <div class="duel-actions">
        <button id="btn-declare-winner" class="btn btn-primary">Declarar Ganador</button>
        <button id="btn-reset-duel" class="btn btn-secondary">â†º Reiniciar</button>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCREEN: TOURNAMENT
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="screen-tournament" class="screen">
    <div class="screen-inner">
      <header class="tournament-header">
        <h2>ğŸ† Torneo Final</h2>
      </header>

      <!-- Pre phase -->
      <div id="tournament-pre" style="display:none">
        <!-- Gold conversion table (full tracking only) -->
        <div id="gold-conversion-table" class="card" style="display:none">
          <h3 class="card-title">ConversiÃ³n de Oro</h3>
          <table class="conversion-table">
            <thead><tr><th>Oro</th><th>Canje</th></tr></thead>
            <tbody>
              <tr><td>5 oro</td><td>1 equipamiento</td></tr>
              <tr><td>15 oro</td><td>1 slot de equipamiento</td></tr>
              <tr><td>30 oro</td><td>+1 manÃ¡ permanente</td></tr>
            </tbody>
          </table>
        </div>

        <div class="card">
          <h3 class="card-title">Orden del Torneo</h3>
          <p class="card-hint">Se asignarÃ¡ un orden aleatorio a los jugadores para el bracket.</p>
          <div id="seed-rolls-list"></div>
          <button id="btn-randomize-seeds" class="btn btn-secondary">ğŸ”€ Aleatorizar Orden</button>
          <button id="btn-generate-bracket" class="btn btn-primary" style="margin-top:0.5rem" disabled>Generar Bracket</button>
        </div>
      </div>

      <!-- Bracket phase -->
      <div id="tournament-bracket" style="display:none">
        <div id="bracket-rounds"></div>
      </div>

      <!-- Champion phase -->
      <div id="tournament-champion" style="display:none">
        <div id="confetti-container" aria-hidden="true"></div>
        <div class="champion-banner">
          <div class="champion-crown">ğŸ‘‘</div>
          <div class="champion-title">Â¡CampeÃ³n!</div>
          <div class="champion-name" id="champion-name"></div>
          <div class="champion-char" id="champion-char"></div>
        </div>
        <button id="btn-new-game" class="btn btn-primary btn-lg">Nueva Partida</button>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MODAL (notifications + prompts)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="modal-overlay" class="modal-overlay" style="display:none" role="dialog" aria-modal="true">
    <div class="modal-box">
      <div class="modal-title" id="modal-title"></div>
      <div class="modal-body" id="modal-body"></div>
      <div class="modal-actions" id="modal-actions"></div>
    </div>
  </div>

  <script src="data.js"></script>
  <script src="app.js"></script>
</body>
</html>
